<div class="page-std-padding-x page-std-padding-y space-y-8 bg-gray-50 min-h-screen">
    <h1 class="text-3xl font-bold text-gray-900 mb-6 text-center">User Profile</h1>

    <div class="flex flex-col items-center mb-8">
        <div class="w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center text-blue-800 text-5xl font-bold border-2 border-blue-400">
            <ng-container *ngIf="currentUser?.displayName; else defaultAvatar">
                {{ currentUser?.displayName?.charAt(0)?.toUpperCase() }}
            </ng-container>
            <ng-template #defaultAvatar>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            </ng-template>
        </div>
        <h2 class="mt-4 text-2xl font-semibold text-gray-900">
            {{ currentUser?.displayName ?? 'New User' }}
        </h2>
        <p class="text-sm text-gray-500">
            {{ currentUser?.email }} </p>
    </div>

    <div class="max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md space-y-4">
        <h3 class="text-xl font-semibold text-gray-800 border-b pb-3 mb-4">Personal Information</h3>
        
        <div class="flex items-center space-x-2 text-lg">
            <div class="font-semibold w-36 flex-shrink-0 text-gray-700">
                Display Name: 
            </div>
            <div class="text-gray-800 flex-grow">
                {{ currentUser?.displayName ?? '-' }}
            </div>
        </div>

        <div class="flex items-center space-x-2 text-lg">
            <div class="font-semibold w-36 flex-shrink-0 text-gray-700">
                Email: 
            </div>
            <div class="text-gray-800 flex-grow">
                {{ currentUser?.email ?? '-' }}
            </div>
        </div>
    </div>

    <div class="max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md space-y-4 mt-6">
        <h3 class="text-xl font-semibold text-gray-800 border-b pb-3 mb-4">Account Activity</h3>
        
        <div class="flex items-center space-x-2 text-lg">
            <div class="font-semibold w-36 flex-shrink-0 text-gray-700">
                Joined At: 
            </div>
            <div class="text-gray-800 flex-grow">
                <ng-container *ngIf="currentUser?.createdAt; else noCreatedAt">
                    {{ currentUser?.createdAt | date:'medium' }}
                </ng-container>
                <ng-template #noCreatedAt>-</ng-template>
            </div>
        </div>

        <div class="flex items-center space-x-2 text-lg">
            <div class="font-semibold w-36 flex-shrink-0 text-gray-700">
                Last updated: 
            </div>
            <div class="text-gray-800 flex-grow">
                <ng-container *ngIf="currentUser?.updatedAt; else noUpdatedAt">
                    {{ currentUser?.updatedAt | date:'medium' }}
                </ng-container>
                <ng-template #noUpdatedAt>-</ng-template>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md mt-6">
        <h3 class="text-xl font-semibold text-gray-800 border-b pb-3 mb-4">Watching Activity</h3>
        <div class="heatmap-container flex p-2 border border-gray-200 rounded-md overflow-x-auto xl:overflow-x-visible xl:justify-center">
            <div class="flex flex-col justify-start mr-2 text-xs text-gray-500 pt-5">
                <div class="h-3.5 leading-none"></div> <div class="h-3.5 leading-none mb-1">Mon</div>
                <div class="h-3.5 leading-none"></div>
                <div class="h-3.5 leading-none mb-1">Wed</div>
                <div class="h-3.5 leading-none"></div>
                <div class="h-3.5 leading-none mb-1">Fri</div>
                <div class="h-3.5 leading-none"></div>
            </div>

            <div class="flex flex-col flex-grow">
                <div class="flex mb-2 justify-between">
                    <ng-container *ngFor="let month of months; let i = index">
                        <div class="text-xs text-gray-500 mr-4" [style.min-width.px]="i === months.length - 1 ? 0 : 50">{{ month }}</div>
                    </ng-container>
                </div>
                
                <div class="flex flex-grow">
                    <ng-container *ngFor="let week of calendarDays; let i = index">
                        <div class="flex flex-col space-y-1 mr-1">
                            <ng-container *ngFor="let day of week">
                                <div
                                    *ngIf="day.count !== -1"
                                    [class]="'w-3.5 h-3.5 rounded-sm ' + getHeatmapColor(day.count)"
                                    [title]="day.count + ' movies on ' + (day.date | date:'mediumDate')"
                                ></div>
                                <div
                                    *ngIf="day.count === -1"
                                    class="w-3.5 h-3.5 rounded-sm bg-transparent"
                                ></div>
                            </ng-container>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="flex justify-end items-center mt-2 text-xs text-gray-500">
            Less
            <div class="w-3.5 h-3.5 rounded-sm bg-gray-200 ml-1 mr-0.5"></div>
            <div class="w-3.5 h-3.5 rounded-sm bg-green-100 mr-0.5"></div>
            <div class="w-3.5 h-3.5 rounded-sm bg-green-300 mr-0.5"></div>
            <div class="w-3.5 h-3.5 rounded-sm bg-green-500 mr-0.5"></div>
            <div class="w-3.5 h-3.5 rounded-sm bg-green-700 mr-1"></div>
            More
        </div>
    </div>

    <div class="flex justify-center space-x-4 mt-8">
        <a [routerLink]="'/edit-profile'" class="standard-write-button">
            Edit Profile
        </a>
        <button class="standard-action-button">
            Change Password
        </button>
    </div>
</div>